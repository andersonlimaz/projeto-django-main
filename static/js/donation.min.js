$(document).ready((function(){$(window).on("load resize",(function(){vertical_align()}));var e=get_url_parameter("bg");e&&$("body").css("background-image","url(https://www.lbv.org/sites/default/files/email-marketing/"+e+".jpg)")})),$(document).ready((function(){var e=$(".modal--product");(!get_url_parameter("destination")||get_url_parameter("destination")&&get_url_parameter("destination").indexOf("product")>-1)&&e.modal({backdrop:"static"}).on("hide.bs.modal",(function(){$('[name="stamp"]').val(e.find(".item.active").data("stamp"))})),e.find(".carousel").hammer().on("swipeleft swiperight",(function(e){$(this).carousel("swipeleft"==e.type?"next":"prev")}))})),1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&setTimeout((function(){$(".form-group--payment").attr("style","display:none !important")}),100),1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")?setTimeout((function(){$(".tipo").html("Cartão de Crédito")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&2==get_url_parameter("form_collection")?setTimeout((function(){$(".tipo").html("Débito Bancário")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&3==get_url_parameter("form_collection")?setTimeout((function(){$(".tipo").html("Conta de Energia")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&4==get_url_parameter("form_collection")?setTimeout((function(){$(".tipo").html("Conta de Telefone")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&5==get_url_parameter("form_collection")&&setTimeout((function(){$(".tipo").html("Recibo")}),1),1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")&&1==get_url_parameter("flag")?setTimeout((function(){$(".bandeira").html("(Visa)")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")&&2==get_url_parameter("flag")?setTimeout((function(){$(".bandeira").html("(Mastercard)")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")&&3==get_url_parameter("flag")?setTimeout((function(){$(".bandeira").html("(Elo)")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")&&4==get_url_parameter("flag")?setTimeout((function(){$(".bandeira").html("(Hipercard)")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")&&5==get_url_parameter("flag")?setTimeout((function(){$(".bandeira").html("(AMEX)")}),1):1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")&&6==get_url_parameter("flag")&&setTimeout((function(){$(".bandeira").html("(Diners)")}),1),1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&1==get_url_parameter("form_collection")&&setTimeout((function(){$(".blc3-card-number").removeClass("hidden"),$(".numero-cartao").html("..."+get_url_parameter("card_number")),$(".blc4-change-charge").hide(),$(".blc5-change-charge").removeClass("hidden")}),1),1==get_url_parameter("login")&&"F"==get_url_parameter("variant")&&2==get_url_parameter("form_collection")&&setTimeout((function(){$(".blc3-agency-number").removeClass("hidden"),$(".blc3-account-number").removeClass("hidden"),$(".numero-agencia").html(get_url_parameter("agency_number")),$(".numero-conta").html("..."+get_url_parameter("account_number"))}),1),"I"==get_url_parameter("variant")&&$(document).ready((function(){$(document).ajaxComplete((function(e,a,o){console.log(a.responseText)})),$("#card-1").click((function(){$(".form-control--donation_option").val(-1).trigger("change"),$(".form-control--periodicity").val(1).trigger("change"),$(".form-control--amount").val("80,00").trigger("change"),$("#card-1").css("background-color","#ab191e"),$("#card-2").css("background-color","#6c5742"),$("#card-3").css("background-color","#6c5742")})),$("#card-2").click((function(){$(".form-control--donation_option").val(-1).trigger("change"),$(".form-control--periodicity").val(1).trigger("change"),$(".form-control--amount").val("160,00").trigger("change"),$("#card-1").css("background-color","#6c5742"),$("#card-2").css("background-color","#ab191e"),$("#card-3").css("background-color","#6c5742")})),$("#card-3").click((function(){$(".form-control--donation_option").val(-1).trigger("change"),$(".form-control--periodicity").val(1).trigger("change"),$(".form-control--amount").val("40,00").trigger("change"),$("#cad-1").css("background-color","#6c5742"),$("#card-2").css("background-color","#6c5742"),$("#card-3").css("background-color","#ab191e")}))})),Cookies.set("first_visit",Cookies.get("first_visit")||moment().format("YYYYMMDDHHmmss")+rand(100,999),{expires:730}),Cookies.set("collaborator",get_url_parameter("collaborator")||Cookies.get("collaborator")||"",{expires:730}),Cookies.set("variant",get_url_parameter("variant")||Cookies.get("variant")||"A",{expires:.005}),Cookies.set("form_collection",get_url_parameter("form_collection")||Cookies.get("form_collection")||0,{expires:.005}),Cookies.set("flag",get_url_parameter("flag")||Cookies.get("flag")||0,{expires:.005}),Cookies.set("card_number",get_url_parameter("card_number")||Cookies.get("card_number")||0,{expires:.005}),Cookies.set("agency_number",get_url_parameter("agency_number")||Cookies.get("agency_number")||0,{expires:.005}),Cookies.set("account_number",get_url_parameter("account_number")||Cookies.get("account_number")||0,{expires:.005}),Cookies.set("lgpd",get_url_parameter("lgpd")||Cookies.get("lgpd")||1,{expires:.005}),Cookies.set("login",get_url_parameter("login")||Cookies.get("login")||0,{expires:365e4}),fields_to_storage_in_cookies=["name","email","gender","birthday","telephone","donation_option","cdg_contributor","lgpd"];for(var i=0;i<fields_to_storage_in_cookies.length;i++)Cookies.set(fields_to_storage_in_cookies[i],Cookies.get(fields_to_storage_in_cookies[i])||"",{expires:180});0==get_url_parameter("login")&&logout(!1);var validatePhoneIfHas9=function(e){return new RegExp("^[(](11|12|13|14|15|16|17|18|19|21|22|24|27|28|31|32|33|34|35|37|38|41|42|43|44|45|46|47|48|49|51|53|54|55|61|62|63|64|65|66|67|68|69|71|73|74|75|77|79|81|82|83|84|85|86|87|88|89|91|92|93|94|95|96|97|98|99)[)]").test(e)},SPMaskBehavior=function(e){return validatePhoneIfHas9(e)?"(00) 90000-0000":"(00) 0000-0000"};$(document).ready((function(){var e={cpf:{mask:"000.000.000-00",options:{selectOnFocus:!0}},birthday:{mask:"00/00/0000",options:{selectOnFocus:!0}},telephone:{mask:"(00) 90000-0000",options:{onKeyPress:function(e,a,o,t){this.lastMaskHas9=void 0===this.lastMaskHas9||this.lastMaskHas9;var r=validatePhoneIfHas9(e);if(this.lastMaskHas9!==r){this.lastMaskHas9=r;var i=SPMaskBehavior(e),n={selectOnFocus:!0};n.onKeyPress=t.onKeyPress,r&&(n.translation={9:{pattern:/[9]/,optional:!0}}),$('[name="telephone"]').unmask(),$('[name="telephone"]').mask(i,n)}}}},amount:{mask:"#.##0,00",options:{selectOnFocus:!0,reverse:!0}},modal_readjust_value:{mask:"#.##0,00",options:{selectOnFocus:!0,reverse:!0}},credit_card:{mask:"#",options:{selectOnFocus:!0,reverse:!0}},credit_card_security_code:{mask:"#",options:{selectOnFocus:!0,reverse:!0}},credit_card_holder:{mask:"S",options:{selectOnFocus:!0,reverse:!0,translation:{S:{pattern:/[a-zA-Z .]/,recursive:!0}},onKeyPress:function(e,a){a.currentTarget.value=e.toUpperCase()}}},credit_card_validity_date:{mask:"00/00",options:{selectOnFocus:!0}},agency:{mask:"099999999999",options:{selectOnFocus:!0}},account:{mask:"099999999999",options:{selectOnFocus:!0}},zipcode:{mask:"00000-000",options:{selectOnFocus:!0}},number:{mask:"099999999",options:{selectOnFocus:!0,translation:{0:{pattern:/[1-9]/}}}}};for(var a in e)$('[name="'+a+'"]').mask(e[a].mask,e[a].options)})),$(document).ready((function(){var e=$("select.float-label");e.each((function(){$(this).wrap('<div class="floatlabel-wrapper" style="position:relative"></div>'),$(this).attr("style","transition: all 0.1s ease-in-out; -webkit-transition: all 0.1s ease-in-out; -moz-transition: all 0.1s ease-in-out; -o-transition: all 0.1s ease-in-out; -ms-transition: all 0.1s ease-in-out;"),$(this).before('<label class="label-floatlabel" style="position: absolute; top: 0px; left: 8px; display: none; opacity: 0; font-size: 11px; font-weight: bold; transition: all 0.1s ease-in-out; -webkit-transition: all 0.1s ease-in-out; -moz-transition: all 0.1s ease-in-out; -o-transition: all 0.1s ease-in-out; -ms-transition: all 0.1s ease-in-out;">'+$(this).find(":selected").text()+"</label>")})),e.on("blur change keyup",(function(){$(this).val()?($(this).addClass("active-floatlabel"),$(this).prev(".label-floatlabel").css({display:"block",opacity:"1"})):($(this).removeClass("active-floatlabel"),$(this).prev(".label-floatlabel").css({display:"none",opacity:"0"}))}))})),$(document).ready((function(){$.validator.setDefaults({validClass:"has-success has-markup-success",errorClass:"has-error has-markup-error",ignore:".ignore",errorPlacement:function(e,a){$(".label-danger--"+a.attr("name")).html(e.html())},highlight:function(e,a,o){$(e).parents(".form-group").addClass(a).removeClass(o),!$(e).val()&&field_is_storaged_in_cookie($(e).attr("name"))&&Cookies.set($(e).attr("name"),"")},unhighlight:function(e,a,o){$(e).parents(".form-group").addClass(o).removeClass(a),$(".label-danger--"+$(e).attr("name")).text(""),field_is_storaged_in_cookie($(e).attr("name"))&&Cookies.set($(e).attr("name"),$(e).val())}})})),$(document).ready((function(){var e=$("form");e.submit((function(e){e.preventDefault()}));var a,o=$(".label--fail-donation");$.validator.setDefaults({rules:{donation_option:{required:!0},name:{required:!0,maxlength:255,regex:"^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð]+ [a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'\"-]+$",trim:!0},email:{required:!0,email:!0,maxlength:255,trim:!0},country:{required:!0,in_list:[api.country.brazil.code.toString(),api.country.argentina.code.toString()],trim:!0},telephone:{required:!0,regex:"(?:(?=^[(](11|12|13|14|15|16|17|18|19|21|22|24|27|28|31|32|33|34|35|37|38|41|42|43|44|45|46|47|48|49|51|53|54|55|61|62|63|64|65|66|67|68|69|71|73|74|75|77|79|81|82|83|84|85|86|87|88|89|91|92|93|94|95|96|97|98|99)[)] (9)?[0-9]{4}-[0-9]{4}$))",trim:!0},zipcode:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.oi.code}},regex:"^[0-9]{5}-[0-9]{3}$",trim:!0,remote:function(){return{url:base_url+"/oi?filter[telefone]="+$('[name="telephone"]').val().replace(/[^0-9]/g,"")+"&filter[cep]="+$('[name="zipcode"]').val().replace(/[^0-9]/g,"")+"&filter[cpf]="+$('[name="cpf"]').val().replace(/[^0-9]/g,""),type:"GET"}}},birthday:{required:!0,date_format:"DD/MM/YYYY",date_after:{format:"DD/MM/YYYY",after:"-100 years"},date_before:{format:"DD/MM/YYYY",before:api.min_age.toString()+" years"},trim:!0},gender:{required:!0,trim:!0},cpf:{required:!0,cpf:!0,trim:!0},amount:{required:!0,min_amount:api.min_amount.toString(),regex:"^[0-9.]{1,},[0-9]{2}$",trim:!0},periodicity:{required:!0,trim:!0},payment:{required:!0,in_list:api.available_payments.toString().split(","),trim:!0},credit_card:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.credit_card.code}},creditcard:!0,credit_card_number:function(){return $('[name="credit_card_flag"]').val()},trim:!0},credit_card_flag:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.credit_card.code}},in_list:api.available_credit_card_flags.toString().split(","),trim:!0},credit_card_security_code:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.credit_card.code}},credit_card_security_code:function(){return $('[name="credit_card_flag"]').val()},trim:!0},credit_card_validity_date:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.credit_card.code.toString()}},date_format:"MM/YY",date_after:{format:"MM/YY",after:"+0 months"},trim:!0},credit_card_holder:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.credit_card.code.toString()}},trim:!0},bank:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.debit.code.toString()}},digits:!0,trim:!0},agency:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.debit.code.toString()}},digits:!0,rangelength:[1,12],trim:!0},account:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.debit.code.toString()}},digits:!0,rangelength:[1,12],trim:!0},due_date:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.debit.code.toString()}},digits:!0,min:1,max:31,trim:!0},cdg_contributor:{required:{depends:function(e){return $('[name="payment"]').val()==api.payment.instant_payment.code}},trim:!0},lgpd:{required:!0}},messages:{donation_option:{required:"Esse campo não pode ficar em branco"},name:{required:"Esse campo não pode ficar em branco",maxlength:"O nome deve possuir no máximo 255 caracteres",regex:"Use nome e sobrenome sem números",trim:"Retire o excesso de espaço no início e no fim"},email:{required:"Esse campo não pode ficar em branco",email:"O email precisa ser corrigido",maxlength:"O email deve possuir no máximo 255 caracteres",trim:"Retire o excesso de espaço no início e no fim"},telephone:{required:"Esse campo não pode ficar em branco",rangelength:"O telefone deve possuir entre 8 e 9 dígitos",regex:"O telefone precisa ser corrigido",trim:"Retire o excesso de espaço no início e no fim"},zipcode:{required:"Esse campo não pode ficar em branco",regex:"O CEP precisa ser corrigido",trim:"Retire o excesso de espaço no início e no fim",remote:"Dados não conferem com os do titular do telefone,<br>escolha outra forma de cobrança"},birthday:{required:"Esse campo não pode ficar em branco",date_format:"A data de nascimento é inválida",date_after:"A data de nascimento deve ser menor que 100 anos",date_before:"Você precisa ter mais de 18 anos para doar",trim:"Retire o excesso de espaço no início e no fim"},gender:{required:"Esse campo não pode ficar em branco",in_list:"O gênero é inválido",trim:"Retire o excesso de espaço no início e no fim"},cpf:{required:"Esse campo não pode ficar em branco",cpf:"O CPF é inválido",trim:"Retire o excesso de espaço no início e no fim"},amount:{required:"Esse campo não pode ficar em branco",min_amount:"O valor mínimo para doação é de R$ "+api.min_amount.toFixed(2),regex:"O valor deve conter conter os centavos",trim:"Retire o excesso de espaço no início e no fim"},periodicity:{required:"Esse campo não pode ficar em branco",digits:"A periodicidade deve possui apenas números",in_list:"A periodicidade é inválida",trim:"Retire o excesso de espaço no início e no fim"},payment:{required:"Esse campo não pode ficar em branco",in_list:"O tipo de pagamento é inválido",trim:"Retire o excesso de espaço no início e no fim"},credit_card:{required:"Esse campo não pode ficar em branco",creditcard:"O cartão de crédito é inválido",credit_card_number:"O cartão de crédito é inválido para esta bandeira",trim:"Retire o excesso de espaço no início e no fim"},credit_card_flag:{required:"Esse campo não pode ficar em branco",in_list:"A bandeira do cartão de crédito é inválido",trim:"Retire o excesso de espaço no início e no fim"},credit_card_security_code:{required:"Esse campo não pode ficar em branco",credit_card_security_code:"O código de segurança é inválido",trim:"Retire o excesso de espaço no início e no fim"},credit_card_validity_date:{required:"Esse campo não pode ficar em branco",date_format:"A data de validade do cartão de crédito é inválida",date_after:"A data de validade do cartão de crédito é inválida",trim:"Retire o excesso de espaço no início e no fim"},credit_card_holder:{required:"Esse campo não pode ficar em branco",trim:"Retire o excesso de espaço no início e no fim"},bank:{required:"Esse campo não pode ficar em branco",digits:"O código do banco deve possuir apenas números",in_list:"O código do banco é inválido",trim:"Retire o excesso de espaço no início e no fim"},agency:{required:"Esse campo não pode ficar em branco",digits:"A agência deve possuir apenas números",rangelength:"A agência deve possuir entre 1 e 12 dígitos",trim:"Retire o excesso de espaço no início e no fim"},account:{required:"Esse campo não pode ficar em branco",digits:"A conta deve possuir apenas números",rangelength:"A conta deve possuir entre 1 e 12 dígitos",trim:"Retire o excesso de espaço no início e no fim"},cdg_contributor:{required:"Esse campo não pode ficar em branco",trim:"Retire o excesso de espaço no início e no fim"},lgpd:{required:"Esta opção não pode ficar em branco"}},submitHandler:function(){send_complete_donation(e)},invalidHandler:function(a,o){send_submission_failure_donation(e)}}),e.validate(),e.find(".form-control").on("change",(function(a){e.validate().element($(this)),vertical_align(),o.hide()})),e.find(".form-control").on("focus",(function(e){a=$(this).val()})),e.find(".form-control").on("blur",(function(o){a!=$(this).val()&&e.validate().check($(this))&&!e.validate().checkForm()&&send_attempt_donation(e),e.validate().submitted={}}))})),$(document).ready((function(){var e=$("form"),a=e.find('[name="donation_option"]'),o=e.find('[name="periodicity"]'),t=e.find('[name="amount"]'),r=e.find('[name="payment"]'),i=e.find('[name="bank"]'),n=e.find(".login--logout_button");a.on("change keyup",(function(e){-1==a.val()?(o.parents(".form-group").show(),t.parents(".form-group").show(),t.val()&&t.trigger("input").trigger("change"),a.parents(".form-group").hide()):a.val()?(o.val(a.find(":selected").data("periodicity")),t.val(a.find(":selected").data("amount")),o.trigger("change"),t.trigger("input").trigger("change"),a.hasClass("float-label")&&a.prev(".label-floatlabel").text(a.find(":selected").closest("optgroup").attr("label"))):(o.parents(".form-group").hide(),t.parents(".form-group").hide(),a.parents(".form-group").show())})),o.on("change",(function(){r.parents(".form-group")[o.val()?"show":"hide"](),o.val()==api.periodicity.monthly.code?(r.find('option[value="'+api.payment.billet.code+'"]').hide(),r.find('option[value="'+api.payment.picpay.code+'"]').hide(),r.find('option[value="'+api.payment.pix.code+'"]').hide(),r.val()!=api.payment.billet.code&&r.val()!=api.payment.picpay.code&&r.val()!=api.payment.pix.code||r.clean_validation()):(r.find('option[value="'+api.payment.billet.code+'"]').show(),r.find('option[value="'+api.payment.picpay.code+'"]').show(),r.find('option[value="'+api.payment.pix.code+'"]').show())})),r.popover({placement:"top",html:!0,content:"Após confirmar a doação, enviaremos um email com o beleto.<button style=\"margin-top:10px;\" onclick=\"$('.payment').popover('hide');$('.payment').focus();return false;\" class=\"btn btn-default btn-block\">Ok, entendi</button>",trigger:"manual"}).on("shown.bs.popover",(function(){$("#"+$(this).attr("aria-describedby")).find("button").focus()})),r.on("change",(function(e){r.popover(r.val()==api.payment.billet.code?"show":"hide");var a=$(".fieldset-payment--"+r.val()),o=$(".fieldset-payment").not(a);a.show(),o.hide(),$(".fieldset-payment").find(".form-control").clean_validation()}));var c=$(".modal--bank");c.modal({show:!1,backdrop:"static"}),i.on("change",(function(e){c.modal($.inArray(i.val(),[api.bank.itau.code.toString(),api.bank.banco_brasil.code.toString()])>-1?"show":"hide")})),n.on("click",(function(){logout(!0)})),define_all_available_payments(),define_all_available_credit_card_flags(),fill_and_hide_fields_storaged_in_cookies()})),$(document).ready((function(){var e=get_all_url_parameters();if(e){for(var a in e)e[a]&&($('[name="'+a+'"]').val(e[a]),$('[name="'+a+'"]').trigger("change"));$("form").hasClass("form--donation")&&send_pre_filling_donation($("form"))}$("input.float-label").floatlabel()}));