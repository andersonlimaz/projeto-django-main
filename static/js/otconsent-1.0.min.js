"use strict";var OneTrust,__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{a(i.next(e))}catch(e){o(e)}}function u(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,u)}a((i=i.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,o=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){a.label=n[1];break}if(6===n[0]&&a.label<s[1]){a.label=s[1],s=n;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(n);break}s[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],o=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,s,u,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,(function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}(function(){(function(){return"navigator"in this&&"sendBeacon"in this.navigator}).call(this)||("navigator"in this||(this.navigator={}),"function"!=typeof this.navigator.sendBeacon&&(this.navigator.sendBeacon=function(e,t){var n=this.event&&this.event.type,i="unload"===n||"beforeunload"===n,r="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.open("POST",e,!i),r.withCredentials=!0,r.setRequestHeader("Accept","*/*"),function(e){return"string"==typeof e}(t)?(r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),r.responseType="text"):function(e){return e instanceof Blob}(t)&&t.type&&r.setRequestHeader("Content-Type",t.type);try{r.send(t)}catch(e){return!1}return!0}.bind(this)))}).call("object"===("undefined"==typeof window?"undefined":e(window))?window:{})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,(function(){function e(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<h;e+=2)(0,O[e])(O[e+1]),O[e]=void 0,O[e+1]=void 0;h=0}function i(e,t){var n=this,i=new this.constructor(o);void 0===i[_]&&m(i);var r=n._state;if(r){var s=arguments[r-1];v((function(){return g(r,i,s,n._result)}))}else f(n,i,e,t);return i}function r(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(o);return a(t,e),t}function o(){}function s(e){try{return e.then}catch(e){return M.error=e,M}}function u(t,n,o){n.constructor===t.constructor&&o===i&&n.constructor.resolve===r?function(e,t){t._state===F?l(e,t._result):t._state===x?p(e,t._result):f(t,void 0,(function(t){return a(e,t)}),(function(t){return p(e,t)}))}(t,n):o===M?(p(t,M.error),M.error=null):void 0===o?l(t,n):e(o)?function(e,t,n){v((function(e){var i=!1,r=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,(function(n){i||(i=!0,t!==n?a(e,n):l(e,n))}),(function(t){i||(i=!0,p(e,t))}),e._label);!i&&r&&(i=!0,p(e,r))}),e)}(t,n,o):l(t,n)}function a(e,t){e===t?p(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?u(e,t,s(t)):l(e,t)}function c(e){e._onerror&&e._onerror(e._result),d(e)}function l(e,t){e._state===w&&(e._result=t,e._state=F,0!==e._subscribers.length&&v(d,e))}function p(e,t){e._state===w&&(e._state=x,e._result=t,v(c,e))}function f(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+F]=n,r[o+x]=i,0===o&&e._state&&v(d,e)}function d(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?g(n,i,r,o):r(o);e._subscribers.length=0}}function g(t,n,i,r){var o=e(i),s=void 0,u=void 0,c=void 0,f=void 0;if(o){if((s=function(e,t){try{return e(t)}catch(e){return M.error=e,M}}(i,r))===M?(f=!0,u=s.error,s.error=null):c=!0,n===s)return void p(n,new TypeError("A promises callback cannot return that same promise."))}else s=r,c=!0;n._state!==w||(o&&c?a(n,s):f?p(n,u):t===F?l(n,s):t===x&&p(n,s))}function m(e){e[_]=H++,e._state=void 0,e._result=void 0,e._subscribers=[]}var T=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=0,y=void 0,C=void 0,v=function(e,t){O[h]=e,O[h+1]=t,2===(h+=2)&&(C?C(n):A())},b="undefined"!=typeof window?window:void 0,S=b||{},P=S.MutationObserver||S.WebKitMutationObserver,I="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),E="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,O=new Array(1e3),A=void 0;A=I?function(){return process.nextTick(n)}:P?function(){var e=0,t=new P(n),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}():E?function(){var e=new MessageChannel;return e.port1.onmessage=n,function(){return e.port2.postMessage(0)}}():void 0===b&&"function"==typeof require?function(){try{var e=Function("return this")().require("vertx");return void 0!==(y=e.runOnLoop||e.runOnContext)?function(){y(n)}:t()}catch(e){return t()}}():t();var _=Math.random().toString(36).substring(2),w=void 0,F=1,x=2,M={error:null},H=0,R=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(o),this.promise[_]||m(this.promise),T(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?l(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&l(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,a=n.resolve;if(a===r){var c=s(e);if(c===i&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof c)this._remaining--,this._result[t]=e;else if(n===G){var l=new n(o);u(l,e,c),this._willSettleAt(l,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(a(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===w&&(this._remaining--,e===x?p(i,n):this._result[t]=n),0===this._remaining&&l(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;f(e,void 0,(function(e){return n._settledAt(F,t,e)}),(function(e){return n._settledAt(x,t,e)}))},e}(),G=function(){function e(t){this[_]=H++,this._result=this._state=void 0,this._subscribers=[],o!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t((function(t){a(e,t)}),(function(t){p(e,t)}))}catch(t){p(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},e}();return G.prototype.then=i,G.all=function(e){return new R(this,e).promise},G.race=function(e){var t=this;return new t(T(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},G.resolve=r,G.reject=function(e){var t=new this(o);return p(t,e),t},G._setScheduler=function(e){C=e},G._setAsap=function(e){v=e},G._asap=v,G.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=G},G.Promise=G,G.polyfill(),G})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("this is null or not defined");var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}}}),function(e){var t=function(){};e.JwtPayload=t;var n=function(){};e.JwtPurposePayload=n}(OneTrust||(OneTrust={})),function(e){var t=function(e,t){this._responseText=e,this._statusCode=t,this.responseText=e,this.statusCode=t};(OneTrust||(OneTrust={})).HttpResponse=t}(),function(e){var t=function(){function t(){}return t.GetParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},t.AddListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,(function(){return n.call(e,window.event)})):e["on"+t]=n,!0},t.FindElementById=function(e,t){var n;return void 0===t&&(t=null),t&&(n=t.querySelector("#"+e)),n||(n=document.getElementById(e)),n},t.FindElementsByClass=function(e,t){var n;return void 0===t&&(t=null),t&&(n=this.FormHTMLElementsArray(t.querySelectorAll("."+e))),n||(n=this.FormHTMLElementsArray(document.getElementsByClassName(e))),n},t.FindElementsByTagName=function(e,t){var n;return void 0===t&&(t=null),t&&(n=this.FormHTMLElementsArray(t.querySelectorAll(e))),n||(n=this.FormHTMLElementsArray(document.getElementsByTagName(e))),n},t.FormHTMLElementsArray=function(e){return Array.from?Array.from(e):[].slice.call(e)},t.FindElementByQuery=function(e){return document.querySelector(e)},t.FindElementsByQueryAll=function(e){return document.querySelectorAll(e)},t.CreateElement=function(e){return document.createElement(e)},t.CreateTextNode=function(e){return document.createTextNode(e)},t.JsonCall=function(t,n,i){var r=new XMLHttpRequest;return r.open(t,n,!1),r.setRequestHeader("Content-Type","application/json"),r.onerror=function(){},r.send(i),new e.HttpResponse(r.responseText,r.status)},t.JsonCallAsync=function(t,n,i,r){return void 0===i&&(i=""),new Promise((function(o,s){var u=new XMLHttpRequest;u.onload=function(){var t=new e.HttpResponse(u.responseText,u.status);u.status>=200&&u.status<300?o(t):s(t)},u.onerror=function(){var t=new e.HttpResponse(u.responseText,u.status);s(t)},u.open(t,n,!0),u.setRequestHeader("Content-Type","application/json"),r&&(r.startsWith("Bearer")||(r="Bearer "+r),u.setRequestHeader("Authorization",r)),u.send(i)}))},t.BeaconCall=function(e,t){return navigator.sendBeacon(e,t)},t.DecodeToken=function(e){if(!e)return null;var t=e.split(".")[1];if(!t)return null;t=t.replace(/-/g,"+").replace(/_/g,"/");var n=window.atob(t);return JSON.parse(n)},t.DownloadText=function(e,t){var n=document.createElement("a");return n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),!0},t.StopEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},t.RestartMouseEvent=function(e){try{var t=new MouseEvent("click",{detail:e.detail,clientX:e.clientX,clientY:e.clientY,button:e.button,ctrlKey:e.ctrlKey,relatedTarget:e.relatedTarget});return e.target.dispatchEvent(t)}catch(t){return e.target.click()}},t.HtmlEncode=function(e){if(!e)return e;var n=t.CreateElement("div");return n.innerText=n.textContent=e,n.innerHTML},t.unicodeBase64Decode=function(e){return decodeURIComponent(Array.prototype.map.call(window.atob(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},t.FindElementByDefinition=function(e,t,n){void 0===n&&(n=null);for(var i=this.FindElementsByTagName(t,n),r=[],o=!1,s=0;s<i.length;s++){var u=i[s],a=u.getAttribute(e.identifierAttributes||e.targetElementAttribute);if(a===e.identifierValues||a===e.targetElementValue){var c=u.getAttribute("type");switch(c){case"radio":case"checkbox":o="radio"===c,r.push(u);break;default:return u}}}if(r.length){var l=r.filter((function(e){return e.checked||e.getAttribute("checked")}));return l.length?o?l[0]:l:null}return null},t.GetPageDomain=function(){return window.location.hostname.replace("www.","")},t.AddDropdownOption=function(e,n,i,r){if(void 0===i&&(i=""),void 0===r&&(r=!1),!e)return!1;i||(i=n);var o=t.CreateElement("option");return o.label=i,o.text=i,o.value=n,o.selected=r,e.add(o),!0},t.InjectCss=function(e,t){if(e){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),t&&n.setAttribute("class",t),document.head.appendChild(n)}},t.RemoveByClass=function(e,t){for(var n=this.FindElementsByTagName(e),i=0,r=n.length-1;r>=0;r--){var o=n[r];o.className===t&&(document.head.removeChild(o),i++)}return i},t.RemoveByUrl=function(e,t){for(var n=this.FindElementsByTagName(e),i=0,r=n.length-1;r>=0;r--){var o=n[r];o.href===t&&(document.head.removeChild(o),i++)}return i},t.GetDocumentLanguage=function(){return document.documentElement.lang},t.ToggleHTMLElementClass=function(e,t){e.classList.toggle(t)},t.UpdateHTMLElementInnerHTML=function(e,t){e.innerHTML=t},t}();e.Helpers=t}(OneTrust||(OneTrust={})),function(e){!function(e){e.SCRIPTINIT="script-init",e.PAGELOAD="page-load",e.DOMLOAD="document-load",e.EXTERNAL="external"}(e.ConsentRegisterEventType||(e.ConsentRegisterEventType={})),function(e){e.FORMSUBMIT="FORMSUBMIT",e.OPTINCHECKBOX="OPTINCHECKBOX",e.OPTOUTCHECKBOX="OPTOUTCHECKBOX",e.CONDITIONALTRIGGER="CONDITIONALTRIGGER",e.UNCHECKOPTOUT="UNCHECKOPTOUT",e.CHECKOPTOUT="CHECKOPTOUT"}(e.ConsentTypes||(e.ConsentTypes={})),function(e){e.NOOPTOUT="NO_OPT_OUT",e.OPTOUT="OPT_OUT"}(e.TransactionTypes||(e.TransactionTypes={})),function(e){e.preferences="preferences",e.customElements="customElements",e.dataElements="dataElements",e.noConsentTransactions="noConsentTransactions",e.token="token",e.language="language",e.testMode="testMode",e.receiptApiEndpoint="receiptApiEndpoint",e.confirmationId="confirmationId",e.showNotice="showNotice",e.identifierId="identifierId",e.fixedTooltip="fixedTooltip",e.fixedTooltipId="fixedTooltipId"}(e.SettingsProperty||(e.SettingsProperty={}))}(OneTrust||(OneTrust={})),function(e){var t=function(){function t(){}return Object.defineProperty(t,"ConsentScriptIdAttribute",{get:function(){return"consent-receipt-script"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ReceiptIdParameterName",{get:function(){return"receiptId"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ExplicitConsentTypes",{get:function(){return[e.ConsentTypes.OPTINCHECKBOX,e.ConsentTypes.OPTOUTCHECKBOX,e.ConsentTypes.CONDITIONALTRIGGER,e.ConsentTypes.CHECKOPTOUT,e.ConsentTypes.UNCHECKOPTOUT]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ExplicitTransactionTypeConsentTypes",{get:function(){return[e.ConsentTypes.CHECKOPTOUT,e.ConsentTypes.UNCHECKOPTOUT]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultDataElementValueAttribute",{get:function(){return"value"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BeaconSuccessResult",{get:function(){return"SUCCESS"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Timestamp",{get:function(){return"TIMESTAMP"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CollectionPointAttibute",{get:function(){return"data-ot-cp-id"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FixedReceiptTooltip",{get:function(){return"FixedReceiptTooltip"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TenantIdAttribute",{get:function(){return"data-ot-id"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Token",{get:function(){return"token"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IdentifierIdAttribute",{get:function(){return"identifierId"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TriggerIdAttribute",{get:function(){return"triggerId"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ConditionalConsentTriggerIdAttribute",{get:function(){return"conditionalConsentTriggerId"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ConfirmationIdAttribute",{get:function(){return"confirmationId"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Settings",{get:function(){return"settings"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SettingsUrl",{get:function(){return"settingsUrl"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BundleUrl",{get:function(){return"bundleUrl"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ScriptSubFolder",{get:function(){return"consent-receipt-scripts"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SettingsSubFolder",{get:function(){return"consentmanager-settings"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ConsentRegisterEventAttribute",{get:function(){return"data-ot-consent-register-event"},enumerable:!0,configurable:!0}),t}();e.Constants=t}(OneTrust||(OneTrust={})),function(e){var t=function(){};e.ElementDefinition=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.DataElementDefinition=n;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.PurposeDefinition=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.CustomPreferenceOptionDefinition=r;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.CustomPreferenceDefinition=o;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.TopicDefinition=s;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.CustomElementDefinition=u;var a=function(){};e.DefinitionLabel=a;var c=function(){};e.DataElementOption=c}(OneTrust||(OneTrust={})),function(e){var t=function(){};(OneTrust||(OneTrust={})).SdkSettingsBase=t}(),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.SdkSettingsBase);e.ConsentSdkSettings=t}(OneTrust||(OneTrust={})),function(e){var t=function(){function t(){}return t.GeneratePurposePayload=function(n,i){if(e.SettingsApi.IsExplicitConsent(i)){var r=[];if(!n)return r;var o=e.SettingsApi.GetCollectionPointForm(i),s=e.SettingsApi.IsExplicitTransactionTypeConsent(i),u=e.SettingsApi.GetCollectionPointConsentType(i);return n.forEach((function(e){var n=t.IsElementChecked(e,o);s?t.SetExplicitTransactionTypeConsent(n,r,e,o,i,u):t.SetExplicitConsent(n,r,e,o,i,"")})),r}if(!e.SettingsApi.IsMultiPurposeVersion(i))return[{Id:e.SettingsApi.GetDefaultPurposeId(i)}]},t.SetExplicitTransactionTypeConsent=function(n,i,r,o,s,u){var a="";switch(u){case e.ConsentTypes.UNCHECKOPTOUT:a=n?e.TransactionTypes.NOOPTOUT:e.TransactionTypes.OPTOUT;break;case e.ConsentTypes.CHECKOPTOUT:a=n?e.TransactionTypes.OPTOUT:e.TransactionTypes.NOOPTOUT}switch(a){case e.TransactionTypes.OPTOUT:t.FindCreateReceiptPurpose(i,r,a);break;case e.TransactionTypes.NOOPTOUT:t.FindCreateReceiptPurpose(i,r,a),t.SetExplicitConsent(n,i,r,o,s,a)}},t.SetExplicitConsent=function(e,n,i,r,o,s){e&&t.FindCreateReceiptPurpose(n,i,s),i.topics&&i.topics.forEach((function(e){t.IsElementChecked(e,r)&&t.FindCreateReceiptPreference(n,i,e,s)})),i.customPreferences&&t.ProcessCustomPreferences(n,i,o,s)},t.ProcessCustomPreferences=function(n,i,r,o){i.customPreferences.forEach((function(s){var u,a=s.options;if(a&&a.length){if("function"==typeof s.getOptionsValue)u=s.getOptionsValue();else{var c=e.SettingsApi.GetCollectionPointForm(r),l=void 0;if(c)for(var p=c.querySelectorAll("select"),f=0;f<p.length;f++)if(p[f].querySelector("option[value="+a[0].identifierValues+"]")){l=p[f];break}u=l?[l.value]:a.filter((function(e){return t.IsElementChecked(e,c)})).map((function(e){return e.identifierValues})).filter(Boolean)}t.AddCustomPreferenceOptions(n,i,s,u,r,o)}}))},t.AddCustomPreferenceOptions=function(e,n,i,r,o,s){var u=r&&Array.isArray(r)?r.filter(Boolean):[];u.length&&(t.FindCreateReceiptPurpose(e,n,s),t.AddReceiptCustomPreference(e,n,i,s),t.AddReceiptConsentedOptions(e,n,i,u,o,s))},t.MapToOptionsIdByIdentifierValue=function(t,n,i,r){var o=e.SettingsApi.GetPreferences(r).find((function(e){return e.purpose===t.purpose}));if(o){var s=o.customPreferences.find((function(e){return e.customPreference===n.customPreference}));if(s)return i.map((function(e){return s.options.find((function(t){return t.identifierValues===e}))})).filter(Boolean).map((function(e){return e.option}))}},t.GenerateDataElementsPayload=function(n,i){if(n){var r={},o=e.SettingsApi.GetCollectionPointForm(i);return n.forEach((function(e){if(!e.skipConsent||"true"!==e.skipConsent.toString().toLowerCase()){var n,i=[];e.dataElementOptions&&e.dataElementOptions.length&&e.dataElementOptions.forEach((function(e){t.IsElementChecked(e,o)&&i.push(e.option)})),n=i.length?e.multiSelect?i:i[0]||"":t.ElementValue(e,o),r[e.dataElementName]=n}})),r}},t.GenerateCustomElementsPayload=function(n,i){if(n){var r={},o=e.SettingsApi.GetCollectionPointForm(i);return n.forEach((function(e){r[e.name]=e.value||t.ElementValue(e,o)})),r}},t.FindCreateReceiptPreference=function(e,n,i,r){var o=t.FindCreateReceiptPurpose(e,n,r);o.Preferences||(o.Preferences=[]);for(var s=0;s<o.Preferences.length;s++)if(o.Preferences[s].TopicId===i.topic)return o.Preferences[s];var u={TopicId:i.topic};return o.Preferences.push(u),o.Preferences[o.Preferences.length-1]},t.AddReceiptCustomPreference=function(e,n,i,r){var o=t.FindCreateReceiptPurpose(e,n,r);o&&(o.CustomPreferences=o.CustomPreferences||[],o.CustomPreferences.push({Id:i.customPreference,Options:[]}))},t.AddReceiptConsentedOptions=function(e,n,i,r,o,s){var u=t.FindCreateReceiptPurpose(e,n,s);if(u&&u.CustomPreferences){var a=u.CustomPreferences.find((function(e){return e.Id===i.customPreference}));a&&(a.Options=t.MapToOptionsIdByIdentifierValue(n,i,r,o).slice())}},t.FindCreateReceiptPurpose=function(e,t,n){for(var i=0;i<e.length;i++)if(e[i].Id===t.purpose)return e[i];var r={Id:t.purpose};return n&&(r.TransactionType=n),e.push(r),e[e.length-1]},t.IsElementChecked=function(t,n){var i=e.Helpers.FindElementByDefinition(t,"input",n),r=!1;return i&&(r="[object Array]"===Object.prototype.toString.call(i)&&i.length?i[0].checked:i.checked||!1),r},t.ElementValue=function(t,n){var i=e.Helpers.FindElementByDefinition(t,"input",n)||e.Helpers.FindElementByDefinition(t,"textarea",n)||e.Helpers.FindElementByDefinition(t,"select",n),r="";if(i)if("[object Array]"===Object.prototype.toString.call(i)&&i.length){r=[];for(var o=0;o<i.length;o++)r.push(i[o].value)}else r=i.value||"";return r},t}();e.PayloadGenerator=t}(OneTrust||(OneTrust={})),function(e){var t=function(){function t(e,t,n){this._token=e,this._identifier=t,this._id=n,this.transactionToken=e,this.identifier=t,this.id=n,this.ValidateInputData()}return t.TriggerReceiptHandler=function(n){return __awaiter(this,void 0,void 0,(function(){var i,r,o,s;return __generator(this,(function(u){switch(u.label){case 0:return t.NeedsConditionalTrigger(n)&&!t.GetConditionalCheckboxTicked(n)?[2,Promise.resolve(!1)]:(i=e.PayloadGenerator.GeneratePurposePayload(e.SettingsApi.GetPreferences(n),n),r=e.PayloadGenerator.GenerateDataElementsPayload(e.SettingsApi.GetDataElements(n),n),o=e.PayloadGenerator.GenerateCustomElementsPayload(e.SettingsApi.GetCustomElements(n),n),e.SettingsApi.GetNoConsentTransactions(n)||!e.SettingsApi.IsExplicitConsent(n)||i&&0!==i.length?[4,t.TriggerReceiptAction(!1,i,r,o,"","",!1,"",n)]:[2,Promise.resolve(!1)]);case 1:return s=u.sent(),t.InjectReceiptId(s,n),[2,!0]}}))}))},t.TriggerReceiptAction=function(n,i,r,o,s,u,a,c,l,p){return void 0===s&&(s=""),void 0===u&&(u=""),__awaiter(this,void 0,void 0,(function(){var f,d,g,m,T;return __generator(this,(function(h){switch(h.label){case 0:return(f=u&&s?t.CreateFromCustomData(s,u):t.CreateFromScriptToken(s,l))?[4,f.Send(i,r,o,a,c,l,p)]:[2,null];case 1:return!(d=h.sent())||a?[2,d]:(!0===n&&(g=new Date,m="receipt-"+g.toISOString()+".txt",e.Helpers.DownloadText(m,d)),[2,(T=e.Helpers.DecodeToken(d))?T.jti:null])}}))}))},t.InjectReceiptId=function(t,n){var i=e.SettingsApi.GetConfirmationId(n);if(!i)return!1;var r=e.Helpers.FindElementById(i,e.SettingsApi.GetCollectionPointForm(n));return!!r&&(r.value=e.Helpers.HtmlEncode(t),!0)},t.NeedsConditionalTrigger=function(t){return!e.SettingsApi.IsMultiPurposeVersion(t)&&e.SettingsApi.IsExplicitConsent(t)&&!!e.SettingsApi.GetConditionalConsentTriggerId(t)},t.GetConditionalCheckboxTicked=function(t){var n=e.SettingsApi.GetCollectionPointForm(t),i=e.Helpers.FindElementById(e.SettingsApi.GetConditionalConsentTriggerId(t),n);return null!=i&&i.checked},t.CreateFromScriptToken=function(n,i){var r=e.SettingsApi.GetToken(i),o=e.SettingsApi.GetCollectionPointForm(i);if(!r)return null;if(!n){var s=e.Helpers.FindElementById(e.SettingsApi.GetIdentifierId(i),o);if(null==s)return null;n=s.value}return new t(r,n)},t.CreateFromCustomData=function(e,n){return new t(n,e)},t.prototype.Send=function(t,n,i,r,o,s,u){return __awaiter(this,void 0,void 0,(function(){var a,c,l,p,f;return __generator(this,(function(d){switch(d.label){case 0:a={requestInformation:this.transactionToken,identifier:this.identifier,test:u||e.SettingsApi.IsTestMode(s),language:e.SettingsApi.GetLanguage(s),purposes:t,dsDataElements:n},i&&(a=Object.assign(a,i)),d.label=1;case 1:return d.trys.push([1,3,,4]),c=JSON.stringify(a),r?(l=e.Helpers.BeaconCall(e.SettingsApi.GetReceiptApiEndpoint(s),c),[2,Promise.resolve(l?e.Constants.BeaconSuccessResult:null)]):[4,e.Helpers.JsonCallAsync("POST",e.SettingsApi.GetReceiptApiEndpoint(s),c,o)];case 2:return(p=d.sent())?(f=JSON.parse(p.responseText),[2,f.receipt]):[2,null];case 3:return d.sent(),[2,null];case 4:return[2]}}))}))},t.prototype.ValidateInputData=function(){this.identifier&&(this.identifier=this.identifier.trim())},t}();e.Receipt=t}(OneTrust||(OneTrust={})),function(e){var t=function(){function t(){}return t.MergeExternalSettings=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r;return __generator(this,(function(o){switch(o.label){case 0:return[4,e.Helpers.JsonCallAsync("GET",n)];case 1:return(i=o.sent())&&200===i.statusCode?(r=JSON.parse(i.responseText||"{}"),[2,__assign({},t,r)]):[2,null]}}))}))},t.ReadSettingsString=function(){var t=this.SdkSettings;if(t){var n=e.Helpers.unicodeBase64Decode(t);return JSON.parse(n)}return{}},Object.defineProperty(t,"ScriptBaseUrl",{get:function(){var t=this.ScriptOption("src");return t.substring(0,t.indexOf("/"+e.Constants.ScriptSubFolder))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SdkSettings",{get:function(){return this.ScriptOption(e.Constants.Settings)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SdkSettingsUrl",{get:function(){var t=this.ScriptOption(e.Constants.SettingsUrl);return this.isPreview&&-1===t.indexOf("-draft")&&-1!==t.indexOf("-active")&&(t=t.replace("-active","-draft")),-1!==t.indexOf("-draft")&&(this.isTestMode=!0),t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BundleUrl",{get:function(){return this.ScriptOption(e.Constants.BundleUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ScriptTagElement",{get:function(){return e.Helpers.FindElementById(this.ScriptTagId)},enumerable:!0,configurable:!0}),t.ScriptOption=function(e){var t=this.ScriptTagElement.getAttribute(e),n=this.ScriptTagElement.getAttribute("data-"+e);return t||n||this.ScriptContentOption(e)},t.ScriptContentOption=function(e){if(!this.ScriptTagElement||!this.ScriptTagElement.innerText)return"";for(var t=this.ScriptTagElement.innerText.split(" ").join("").split(";"),n=0;n<t.length;n++){var i=t[n].split("=",2);if(i[0].trim()===e)return i[1].trim().split('"').join("").split("\\x3d").join("=")}return""},t.getParamForIE=function(){return{get:function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?null:decodeURI(t[1])||""}}},t.getUrlParam=function(){var e;e=window.document.documentMode?this.getParamForIE():new URLSearchParams(window.location.search),this.isPreview="true"===e.get("otpreview")},t.ScriptTagId="",t.isPreview=!1,t.isTestMode=void 0,t}();e.ScriptTagBase=t}(OneTrust||(OneTrust={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),Object.defineProperty(n,"Settings",{get:function(){return this._settings||(this._settings=this.ReadSettingsString()),this._settings},enumerable:!0,configurable:!0}),n.GetExternalSettings=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.MergeExternalSettings(this.Settings,this.SdkSettingsUrl)];case 1:return(e=t.sent())?(this._settings=e,[2,!0]):[2,!1]}}))}))},Object.defineProperty(n,"ManualTrigger",{get:function(){return!n.IdentifierId||!n.TriggerId||n.Settings.manualTrigger&&"true"===n.Settings.manualTrigger.toString().toLowerCase()},set:function(e){n.Settings.manualTrigger=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ReceiptApiEndpoint",{get:function(){return n.Settings.receiptApiEndpoint},set:function(e){n.Settings.receiptApiEndpoint=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"DataElements",{get:function(){return n.Settings.dataElements},set:function(e){n.Settings.dataElements=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CustomElements",{get:function(){return n.Settings.customElements},set:function(e){n.Settings.customElements=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Preferences",{get:function(){return n.Settings.preferences},set:function(e){n.Settings.preferences=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsTestMode",{get:function(){return n.Settings.testMode},set:function(e){n.Settings.testMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsFixedTooltip",{get:function(){return n.Settings.fixedTooltip},set:function(e){n.Settings.fixedTooltip=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"FixedTooltipId",{get:function(){return n.Settings.fixedTooltipId||e.Constants.FixedReceiptTooltip},set:function(e){n.Settings.fixedTooltipId=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ShowNotice",{get:function(){return n.Settings.showNotice},set:function(e){n.Settings.showNotice=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Language",{get:function(){return n.Settings.language},set:function(e){n.Settings.language=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"NoConsentTransactions",{get:function(){return n.Settings.noConsentTransactions},set:function(e){n.Settings.noConsentTransactions=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"RegisterConsentEvent",{get:function(){return n.ScriptOption(e.Constants.ConsentRegisterEventAttribute)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Token",{get:function(){return n.ScriptOption(e.Constants.Token)||n.Settings.token},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IdentifierId",{get:function(){return n.ScriptOption(e.Constants.IdentifierIdAttribute)||n.Settings.identifierId},set:function(e){n.Settings.identifierId=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"TriggerId",{get:function(){return n.ScriptOption(e.Constants.TriggerIdAttribute)||n.Settings.triggerId},set:function(e){n.Settings.triggerId=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ConditionalConsentTriggerId",{get:function(){return n.ScriptOption(e.Constants.ConditionalConsentTriggerIdAttribute)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ConfirmationId",{get:function(){return n.ScriptOption(e.Constants.ConfirmationIdAttribute)||n.Settings.confirmationId},set:function(e){n.Settings.confirmationId=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsConfirmationPage",{get:function(){return!!n.IdentifierId&&!e.Helpers.FindElementById(n.IdentifierId)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsExplicitConsent",{get:function(){var t=n.ConsentType;return e.Constants.ExplicitConsentTypes.indexOf(t)>-1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsExplicitTransactionTypeConsent",{get:function(){var t=n.ConsentType;return e.Constants.ExplicitTransactionTypeConsentTypes.indexOf(t)>-1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ConsentType",{get:function(){return e.Helpers.DecodeToken(n.Token).consentType},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsFormSubmitConsent",{get:function(){return e.Helpers.DecodeToken(n.Token).consentType===e.ConsentTypes.FORMSUBMIT},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsMultiPurposeVersion",{get:function(){var t=e.Helpers.DecodeToken(n.Token);return t&&t.purposes&&t.purposes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"DefaultPurposeId",{get:function(){return e.Helpers.DecodeToken(n.Token).purposes[0].id},enumerable:!0,configurable:!0}),n.ScriptTagId=e.Constants.ConsentScriptIdAttribute,n}(e.ScriptTagBase);e.ScriptTag=t}(OneTrust||(OneTrust={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.GetMultiCPExternalSettings=function(e,t){return __awaiter(this,void 0,void 0,(function(){var i=this;return __generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all(e.map((function(e){return __awaiter(i,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:return[4,n.MergeExternalSettings({},n.GetCollectionPointUrl(t,e))];case 1:return(i=r.sent())&&(this._multiCPSettings[e]=i),[2]}}))}))})))];case 1:return[2,r.sent()]}}))}))},Object.defineProperty(n,"MultiCPSettings",{get:function(){return this._multiCPSettings},enumerable:!0,configurable:!0}),Object.defineProperty(n,"IsMultiFormCP",{get:function(){return Boolean(n.TenantId&&n.MultiFormCollectionPointIds.length)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"MultiFormCollectionPointIds",{get:function(){if(!this._collectionPoints){var t=n.CollectionPointForms(),i=[];if(t&&t.length)for(var r=0;r<t.length;r++)i.push(t[r].getAttribute(e.Constants.CollectionPointAttibute));this._collectionPoints=i}return this._collectionPoints},enumerable:!0,configurable:!0}),n.CollectionPointForms=function(){return e.Helpers.FindElementsByQueryAll("form["+e.Constants.CollectionPointAttibute+"]")},n.CollectionPointForm=function(t){return e.Helpers.FindElementByQuery("form["+e.Constants.CollectionPointAttibute+'="'+t+'"]')},n.GetTriggerElement=function(t){var i=n.MultiCPSettings[t].triggerId,r=n.CollectionPointForm(t);return e.Helpers.FindElementById(i,r)},n.GetCollectionPointUrl=function(t,i){var r,o=n.ScriptBaseUrl+"/"+e.Constants.SettingsSubFolder+"/"+t+"/"+i,s=-1!==i.indexOf("-draft");return-1!==(r=n.isPreview&&!s?(-1!==o.indexOf("-active")?o.replace("-active",""):o)+"-draft.json":s||-1!==i.indexOf("-active")?o+".json":o+"-active.json").indexOf("-draft")&&(this.multiformPreview[i]=!0),r},Object.defineProperty(n,"TenantId",{get:function(){return n.ScriptOption(e.Constants.TenantIdAttribute)},enumerable:!0,configurable:!0}),n.GetPreferences=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.preferences)},n.GetCustomElements=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.customElements)},n.GetDataElements=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.dataElements)},n.GetNoConsentTransactions=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.noConsentTransactions)},n.GetToken=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.token)},n.IsExplicitConsent=function(t){var i=n.GetCollectionPointConsentType(t);return e.Constants.ExplicitConsentTypes.indexOf(i)>-1},n.IsExplicitTransactionTypeConsent=function(t){var i=n.GetCollectionPointConsentType(t);return e.Constants.ExplicitTransactionTypeConsentTypes.indexOf(i)>-1},n.GetCollectionPointConsentType=function(t){var i=n.GetToken(t);return e.Helpers.DecodeToken(i).consentType},n.IsFormSubmitConsent=function(t){var i=n.GetToken(t);return e.Helpers.DecodeToken(i).consentType===e.ConsentTypes.FORMSUBMIT},n.IsMultiPurposeVersion=function(t){var i=n.GetToken(t),r=e.Helpers.DecodeToken(i);return r&&r.purposes&&r.purposes.length>1},n.GetDefaultPurposeId=function(t){var i=n.GetToken(t);return e.Helpers.DecodeToken(i).purposes[0].id},n.GetConditionalConsentTriggerId=function(t){return n.ScriptOption(e.Constants.ConditionalConsentTriggerIdAttribute)},n.GetLanguage=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.language)},n.IsTestMode=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.testMode)},n.GetReceiptApiEndpoint=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.receiptApiEndpoint)},n.GetConfirmationId=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.confirmationId)||n.ScriptOption(e.Constants.ConfirmationIdAttribute)},n.GetShowNotice=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.showNotice)},n.GetIdentifierId=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.identifierId)},n.IsFixedTooltip=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.fixedTooltip)},n.GetFixedTooltipId=function(t){return this.getCpSettingsPropertyValue(t,e.SettingsProperty.fixedTooltipId)},n.getCpSettingsPropertyValue=function(e,t){var i=null;return n.MultiCPSettings[e]&&(i=n.MultiCPSettings[e][t]),i},n.ScriptTagId=e.Constants.ConsentScriptIdAttribute,n._multiCPSettings={},n.multiformPreview={},n}(e.ScriptTagBase);e.MultiForm=t}(OneTrust||(OneTrust={})),function(e){var t=function(){function t(){}return t.TooltipElement=function(t,n){return void 0===t&&(t=null),t?e.Helpers.FindElementById(t+"Tooltip",n):null},t.Create=function(n,i,r){void 0===i&&(i=!0);var o=e.SettingsApi.GetCollectionPointForm(r),s=e.Helpers.FindElementById(n,o);if(s){t.ApplyBuiltInStyles(r);var u=e.Helpers.CreateElement("span");u.id=n+"Tooltip",u.className=t.TooltipClassName,u.setAttribute("target",n),e.SettingsApi.IsFixedTooltip(r)?e.Helpers.FindElementById(e.SettingsApi.GetFixedTooltipId(r),o).appendChild(u):(s.parentElement.appendChild(u),t.SetPosition(s,r)),e.Helpers.AddListener(s,"mouseover",(function(e){return t.Show(s,!0,r)})),e.Helpers.AddListener(s,"focus",(function(e){return t.Show(s,!0,r)})),e.Helpers.AddListener(document,"scroll",(function(e){return t.SetPosition(s,r)})),i&&(e.Helpers.AddListener(s,"mouseout",(function(e){return t.Hide(s,!1,r)})),e.Helpers.AddListener(s,"blur",(function(e){return t.Hide(s,!1,r)}))),e.Helpers.AddListener(u,"mouseover",(function(e){return t.MouseInsideTooltipId=n})),e.Helpers.AddListener(u,"mouseout",(function(e){t.MouseInsideTooltipId&&(t.MouseInsideTooltipId=null),i&&setTimeout((function(){return t.Hide(s,!1,r)}),200)}))}},t.SetPosition=function(n,i){if(!e.SettingsApi.IsFixedTooltip(i)){var r=e.SettingsApi.GetCollectionPointForm(i),o=n.getBoundingClientRect(),s=t.TooltipElement(n.id,r),u=s.getBoundingClientRect(),a=o.top-u.height/2+o.height/2,c=o.right;s.style.left=c+"px",s.style.top=a+"px"}},t.SetContent=function(n,i,r){var o=t.TooltipElement(i,e.SettingsApi.GetCollectionPointForm(r));o&&(o.innerHTML=n)},t.Show=function(n,i,r){void 0===i&&(i=!0);var o=e.SettingsApi.GetCollectionPointForm(r);if(this.ActiveTooltipId){var s=e.Helpers.FindElementById(this.ActiveTooltipId,o);s&&t.Hide(s,!0,r)}i&&t.SetPosition(n,r),this.ActiveTooltipId=n.id,t.TooltipElement(n.id,o).className=t.TooltipClassName+" "+t.TooltipVisibleClassName},t.Hide=function(n,i,r,o){void 0===i&&(i=!1),n.className.indexOf(t.TooltipAlwaysVisibleClassName)>-1||(i||document.activeElement!==n&&this.MouseInsideTooltipId!==n.id)&&(this.ActiveTooltipId=null,t.TooltipElement(n.id,e.SettingsApi.GetCollectionPointForm(r)).className=t.TooltipClassName)},t.ApplyBuiltInStyles=function(n){if(!t.StylesApplied){var i=e.SettingsApi.IsFixedTooltip(n),r="\n            .receipt-tooltip {\n                background: #fff;\n                color: #000;\n                font-size: .8rem;\n                font-weight: 400;\n                text-decoration: none;\n                text-align: left;\n                padding: .6em .75rem;\n                border-radius: 4px;\n                position: "+(i?"absolute":"fixed")+";\n                opacity: 0;\n                visibility: hidden;\n                transition: "+(i?"none":"opacity .6s")+";\n                box-shadow: 0 .5rem 1rem -.5rem #000;\n                z-index: 1000;\n                margin-left: 10px;\n                margin-right: 10px;\n            }\n            .receipt-tooltip-visible {\n                visibility: visible;\n                opacity: .9\n            }\n            .receipt-tooltip::before {\n                content: ' ';\n                display: "+(i?"none":"block")+";\n                background: inherit;\n                width: 10px;\n                height: 10px;\n                position: absolute;\n                transform: rotate(45deg);\n                left: -3px;\n                top: 50%;\n                margin-top: -5px\n            }\n            .receipt-headline {\n                margin: 0;\n                font-weight: bold;\n            }\n            .receipt-header {\n                font-size: 1.2rem;\n            }\n        ",o=e.Helpers.FindElementsByTagName("head")[0],s=e.Helpers.CreateElement("style");s.type="text/css",s.appendChild(e.Helpers.CreateTextNode(r)),o.appendChild(s),t.StylesApplied=!0}},t.TooltipClassName="receipt-tooltip",t.TooltipVisibleClassName="receipt-tooltip-visible",t.TooltipAlwaysVisibleClassName="receipt-tooltip-always",t.StylesApplied=!1,t}();e.Tooltip=t}(OneTrust||(OneTrust={})),function(e){var t=function(){};e.ApiLabel=t;var n=function(){function t(){}return t.GetPurposeLabels=function(t){var n=this;void 0===t&&(t="");var i=e.SettingsApi.GetPreferences(),r=[];return i?(i.forEach((function(e){var i=n.DefinitionToLabel(e,t);i&&r.push(i)})),r):r},t.GetTopicLabels=function(t){var n=this;void 0===t&&(t="");var i=e.SettingsApi.GetPreferences(),r=[];return i?(i.forEach((function(e){e.topics&&e.topics.forEach((function(e){var i=n.DefinitionToLabel(e,t);i&&r.push(i)}))})),r):r},t.GetPurposeLabel=function(e,t){void 0===t&&(t="");var n=this.FindPurposeDefinition(e);return n?this.DefinitionToLabel(n,t):null},t.GetTopicLabel=function(e,t){void 0===t&&(t="");var n=this.FindTopicDefinition(e);return n?this.DefinitionToLabel(n,t):null},t.GetPurposeDefinitions=function(){return e.SettingsApi.GetPreferences()},t.SetPurposeDefinitions=function(t){e.ScriptTag.Preferences=t},t.SetCustomPreferencesDefinitions=function(t,n){var i=e.Api.FindPurposeDefinition(t);i&&n.forEach((function(e){i.customPreferences.forEach((function(t,n){e.identifierValues===t.identifierValues&&(i.customPreferences[n]=__assign({},t,e))}))}))},t.SetPurposeIdentifier=function(e,t){var n=this.FindPurposeDefinition(e);return!!n&&(n.identifierValues=t,!0)},t.SetTopicIdentifier=function(e,t){var n=this.FindTopicDefinition(e);return!!n&&(n.identifierValues=t,!0)},t.TriggerBeaconReceiptAction=function(e,t,n,i,r,o){return this.TriggerReceiptAction(e,t,n,i,r,o,!0)},t.TriggerReceiptAction=function(t,n,i,r,o,s,u){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(a){return[2,e.Receipt.TriggerReceiptAction(s,i,r,o,t,n,u)]}))}))},t.RegisterEvent=function(e){this.eventType=e},t.InstallCP=function(t,n){var i=n&&"function"==typeof n;e.MultiForm.GetMultiCPExternalSettings([t],e.MultiForm.TenantId).then((function(){e.ScriptInstaller.InstallMultiFormReceiptTriggerHandler(t),i&&n(!0)})).catch((function(){i&&n(!1)}))},t.FindPurposeDefinition=function(t){var n=e.SettingsApi.GetPreferences();return n?n.find((function(e){return e.identifierValues===t||e.purpose===t})):null},t.FindTopicDefinition=function(t){var n=e.SettingsApi.GetPreferences();if(!n)return null;for(var i=0;i<n.length;i++)if(n[i].topics){var r=n[i].topics.find((function(e){return e.identifierValues===t||e.topic===t}));if(r)return r}return null},t.DefinitionToLabel=function(e,t){if(void 0===t&&(t=""),!e||!e.labels||0===e.labels.length)return null;var n=t?e.labels.find((function(e){return e.language===t})):e.labels[0];if(!n)return null;var i={id:e.purpose||e.topic,domId:e.identifierValues,language:n.language,label:n.label};return n.description&&(i.description=n.description),i},t}();e.Api=n}(OneTrust||(OneTrust={})),function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.GetFixedTooltipId=function(t){return t?e.MultiForm.GetFixedTooltipId(t):e.ScriptTag.FixedTooltipId},n.IsFixedTooltip=function(t){return t?e.MultiForm.IsFixedTooltip(t):e.ScriptTag.IsFixedTooltip},n.GetIdentifierId=function(t){return t?e.MultiForm.GetIdentifierId(t):e.ScriptTag.IdentifierId},n.GetShowNotice=function(t){return t?e.MultiForm.GetShowNotice(t):e.ScriptTag.ShowNotice},n.GetConfirmationId=function(t){return t?e.MultiForm.GetConfirmationId(t):e.ScriptTag.ConfirmationId},n.GetReceiptApiEndpoint=function(t){return t?e.MultiForm.GetReceiptApiEndpoint(t):e.ScriptTag.ReceiptApiEndpoint},n.GetLanguage=function(t){if(t){var n=e.ScriptTag.Language;return n||(n=e.MultiForm.GetLanguage(t)),n}return e.ScriptTag.Language},n.IsTestMode=function(t){return t?e.MultiForm.multiformPreview[t]||e.MultiForm.IsTestMode(t):e.ScriptTag.isTestMode||e.ScriptTag.IsTestMode},n.GetConditionalConsentTriggerId=function(t){return t?e.MultiForm.GetConditionalConsentTriggerId(t):e.ScriptTag.ConditionalConsentTriggerId},n.GetCollectionPointForm=function(t){return t?e.MultiForm.CollectionPointForm(t):null},n.GetDefaultPurposeId=function(t){return t?e.MultiForm.GetDefaultPurposeId(t):e.ScriptTag.DefaultPurposeId},n.IsMultiPurposeVersion=function(t){return t?e.MultiForm.IsMultiPurposeVersion(t):e.ScriptTag.IsMultiPurposeVersion},n.IsExplicitConsent=function(t){return t?e.MultiForm.IsExplicitConsent(t):e.ScriptTag.IsExplicitConsent},n.GetPreferences=function(t){return t?e.MultiForm.GetPreferences(t):e.ScriptTag.Preferences},n.GetCustomElements=function(t){return t?e.MultiForm.GetCustomElements(t):e.ScriptTag.CustomElements},n.GetDataElements=function(t){return t?e.MultiForm.GetDataElements(t):e.ScriptTag.DataElements},n.GetNoConsentTransactions=function(t){return t?e.MultiForm.GetNoConsentTransactions(t):e.ScriptTag.NoConsentTransactions},n.GetToken=function(t){return t?e.MultiForm.GetToken(t):e.ScriptTag.Token},n.IsFormSubmitConsent=function(t){return t?e.MultiForm.IsFormSubmitConsent(t):e.ScriptTag.IsFormSubmitConsent},n.getEventType=function(){return e.Api.eventType||e.ScriptTag.RegisterConsentEvent},n.IsExplicitTransactionTypeConsent=function(t){return t?e.MultiForm.IsExplicitTransactionTypeConsent(t):e.ScriptTag.IsExplicitTransactionTypeConsent},n.GetCollectionPointConsentType=function(t){return t?e.MultiForm.GetCollectionPointConsentType(t):e.ScriptTag.ConsentType},n}(e.MultiForm);e.SettingsApi=t}(OneTrust||(OneTrust={})),function(e){var t=function(){function t(){}return t.RegisterConsentReceipt=function(){switch(t.processPreInstallQ(),e.ScriptTag.getUrlParam(),e.SettingsApi.getEventType()){case e.ConsentRegisterEventType.DOMLOAD:e.Helpers.AddListener(window,"DOMContentLoaded",(function(){t.installReceipt()}));break;case e.ConsentRegisterEventType.PAGELOAD:e.Helpers.AddListener(window,"load",(function(){t.installReceipt()}));break;case e.ConsentRegisterEventType.EXTERNAL:break;default:t.installReceipt()}},t.installReceipt=function(){e.ScriptInstaller.InstallConsentReceipt().then((function(e){e&&t.processPostInstallQ()}))},t.processPreInstallQ=function(){var t=window.OtSdk;if(t&&t.q&&t.q.length){var n=t.q.filter((function(t){if("consent"!==t[0])return!0;if("RegisterEvent"!==t[1])return!0;try{e.Api[t[1]].apply(e.Api,Array.prototype.slice.call(t,2))}catch(e){}finally{return!1}}));t.q=n}},t.processPostInstallQ=function(){var t=window.OtSdk;if(t&&t.q&&t.q.length){var n=t.q.filter((function(t){if("consent"!==t[0])return!0;try{e.Api[t[1]].apply(e.Api,Array.prototype.slice.call(t,2))}catch(e){}finally{return!1}}));t.q=n}},t.InstallReceiptTooltips=function(n){if(e.SettingsApi.GetShowNotice(n)){var i=e.SettingsApi.GetDataElements(n);if(i&&0!==i.length){var r=e.Helpers.DecodeToken(e.SettingsApi.GetToken(n));i.forEach((function(t){if(t.noticeHeadline||t.noticeReason){e.Tooltip.Create(t.identifierValues,!0,n);var i='\n                <p class="receipt-headline">'+e.Helpers.HtmlEncode(t.noticeHeadline)+"</p>\n                <p>"+e.Helpers.HtmlEncode(t.noticeReason)+'</p>\n                <p class="receipt-headline"><a href="'+e.Helpers.HtmlEncode(r.policy_uri)+'" target="_blank">Based on our Privacy Policy</a></p>';e.Tooltip.SetContent(i,t.identifierValues,n)}}))}else t.InstallDefaultReceiptTooltip(n)}},t.InstallConsentReceipt=function(){if(e.ScriptTag.IsConfirmationPage){var n=e.Helpers.GetParameterByName(e.Constants.ReceiptIdParameterName,document.location.href);return n&&t.ShowReceiptConfirmation(n),Promise.resolve(!0)}return e.ScriptTag.SdkSettingsUrl?(e.Api.Initialized=e.ScriptTag.GetExternalSettings().then((function(e){return!!e&&(t.CheckManualTrigger(),!0)})),e.Api.Initialized):e.MultiForm.IsMultiFormCP?(e.MultiForm.getUrlParam(),e.Api.Initialized=e.MultiForm.GetMultiCPExternalSettings(e.MultiForm.MultiFormCollectionPointIds,e.MultiForm.TenantId).then((function(){return t.installMultiformHandler(),!0})),e.Api.Initialized):(t.CheckManualTrigger(),Promise.resolve(!0))},t.CheckManualTrigger=function(){e.ScriptTag.ManualTrigger||t.InstallReciptDefaultAction()},t.InstallReciptDefaultAction=function(){t.InstallReceiptTriggerHandler(e.ScriptTag.TriggerId),t.InstallReceiptTooltips()},t.InstallReceiptTriggerHandler=function(n){return __awaiter(this,void 0,void 0,(function(){var i,r=this;return __generator(this,(function(o){return(i=e.Helpers.FindElementById(n))?(e.Helpers.AddListener(i,"click",(function(n){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return t.ReceiptTriggered?[2,!0]:(t.ReceiptTriggered=!0,e.Helpers.StopEvent(n),[4,e.Receipt.TriggerReceiptHandler()]);case 1:return i.sent(),e.Helpers.RestartMouseEvent(n),[2]}}))}))})),[2]):[2]}))}))},t.InstallDefaultReceiptTooltip=function(t){var n=e.SettingsApi.GetIdentifierId(t);if(n){e.Tooltip.Create(n,!0,t);var i=e.Helpers.DecodeToken(e.SettingsApi.GetToken(t)),r='\n            <h4 class="receipt-header">Processing Consent Notice</h4>\n            <p class="receipt-headline">You are agreeing to:</p>\n            <p>'+e.Helpers.HtmlEncode(i.description)+'</p>\n            <p class="receipt-headline">You will be identified by your:</p>\n            <p>'+e.Helpers.HtmlEncode(i.sub)+'</p>\n            <p class="receipt-headline"><a href="'+e.Helpers.HtmlEncode(i.policy_uri)+'" target="_blank">Based on our Privacy Policy</a></p>';e.Tooltip.SetContent(r,n,t)}},t.InstallMultiFormReceiptTriggerHandler=function(n){var i=this,r=e.MultiForm.GetTriggerElement(n);r&&(e.Helpers.AddListener(r,"click",(function(r){return __awaiter(i,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return t.MultiFormReceiptTriggered[n]?[2,!0]:(t.MultiFormReceiptTriggered[n]=!0,e.Helpers.StopEvent(r),[4,e.Receipt.TriggerReceiptHandler(n)]);case 1:return i.sent(),e.Helpers.RestartMouseEvent(r),[2]}}))}))})),t.InstallReceiptTooltips(n))},t.installMultiformHandler=function(){e.MultiForm.MultiFormCollectionPointIds.forEach((function(e){t.InstallMultiFormReceiptTriggerHandler(e)}))},t.ShowReceiptConfirmation=function(t){var n="Your receipt id: "+t;return e.Helpers.FindElementById(e.ScriptTag.ConfirmationId).innerText=n,!0},t.MultiFormReceiptTriggered={},t}();e.ScriptInstaller=t}(OneTrust||(OneTrust={})),OneTrust.ScriptInstaller.RegisterConsentReceipt();